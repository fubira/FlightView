buildscript {
    repositories {
        mavenCentral()
        maven { url 'https://www.jitpack.io' }
        maven { url 'https://www.dimdev.org/maven/' }
		maven { url 'https://files.minecraftforge.net/maven' }
    }
    dependencies {
        classpath 'com.github.Chocohead:ForgeGradle:jitpack-SNAPSHOT'
    }
}

apply plugin: 'net.minecraftforge.gradle.tweaker-client'
apply plugin: 'java'

def mc_version = "1.13.2"
def mappings_version = 'snapshot_20190529'
def postfix_version = "b"

version = "${mc_version}-${postfix_version}"
group = "net.ironingot.flightview"
archivesBaseName = "riftmod-FlightView"

minecraft {
    version = mc_version
    mappings = mappings_version
    runDir = 'minecraft'
    makeObfSourceJar = false
    tweakClass = 'org.dimdev.riftloader.launch.RiftLoaderClientTweaker'
}

repositories {
    mavenCentral()
    maven { url 'https://www.dimdev.org/maven/' }
    maven { url 'https://www.jitpack.io' }
}

dependencies {
	implementation 'com.github.Chocohead:Rift:d4cd7b00ba:dev'
}
def defaultEncoding = 'UTF-8'
tasks.withType(AbstractCompile).each { it.options.encoding = defaultEncoding }

jar {
    archiveName = archivesBaseName + '-' + mc_version + '-' + postfix_version + '.jar'

    from('./') {
        include 'LICENSE.md'
    }

    manifest {
        attributes([
            'Specification-Title'  : 'FlightView',
            'Specification-Vendor' : 'fubira',
            'Specification-Version': '1',

            'Implementation-Title'  : 'FlightView',
            'Implementation-Vendor' : 'fubira',
            'Implementation-Version': version,

            'Implementation-Timestamp': new Date().format("yyyy-MM-dd'T'HH:mm:ssZ")
        ])
    }
}
